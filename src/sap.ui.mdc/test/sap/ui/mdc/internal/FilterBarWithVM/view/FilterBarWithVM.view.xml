<mvc:View
	height="100%"
	displayBlock="true"
	xmlns="sap.m"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns:f="sap.f"
	xmlns:core="sap.ui.core"
	xmlns:mdc="sap.ui.mdc"
	xmlns:mdct="sap.ui.mdc.table"
	xmlns:vm="sap.ui.fl.variants"
	xmlns:mdcvh="sap.ui.mdc.valuehelp"
	xmlns:mdcvc="sap.ui.mdc.valuehelp.content"
	xmlns:ce="sap.ui.codeeditor"
	xmlns:variants="sap.ui.fl.variants"
	controllerName="mdc.sample.controller.FilterBarWithVM"
	>

	<f:DynamicPage id="page">
		<f:title>
			<f:DynamicPageTitle id="pageTitle" stateChange="onStateChanged">
				<f:actions>
				</f:actions>
				<f:heading>
					<variants:VariantManagement id="IDVariantManagementOfTable" for="page"
						class="sapUiTinyMarginBottom" />
				</f:heading>

				<f:snappedContent>
					<HBox id="snappedContentLayout">
						<Text id="statusTextCollapsed" />
						<Text id="errorTextCollapsed" />
					</HBox>
				</f:snappedContent>
				<f:expandedContent>
					<HBox id="expandedContentLayout">
						<Text id="statusTextExpanded" />
						<Text id="errorTextExpanded" />
					</HBox>
				</f:expandedContent>
			</f:DynamicPageTitle>
		</f:title>
		<f:header>
			<f:DynamicPageHeader id="pageHeader" pinnable="true">
				<mdc:FilterBar
					id="mountainsFilterbar"
					delegate='\{"name": "mdc/sample/delegate/JSONFilterBarDelegate", "payload": \{\}\}'
					p13nMode = "Item,Value"
					propertyInfo='[\{"name": "name", "label": "Name (String)", "path": "name", "dataType":"sap.ui.model.type.String", "visible": true\},
									\{"name": "height", "label": "Height (Integer)", "path": "height", "dataType":"sap.ui.model.type.Integer", "formatOptions": \{"emptyString": null\}, "visible": true\},
									\{"name": "prominence", "label": "Prominence (Float)", "path": "prominence", "dataType":"sap.ui.model.type.Float", "formatOptions": \{"emptyString": null\}, "visible": true\},
									\{"name": "parent_mountain", "label": "Has parent mountain (Boolean)", "path": "parent_mountain", "dataType":"sap.ui.model.type.Boolean", "maxConditions": 1, "visible": true\},
									\{"name": "first_ascent", "label": "First Ascent (Date)", "path": "first_ascent", "dataType":"sap.ui.model.type.Date", "formatOptions": \{"style": "long"\}, "maxConditions": 1, "visible": true\},
									\{"name": "rank", "label": "Rank (Integer)", "path": "rank", "dataType":"sap.ui.model.type.Integer", "formatOptions": \{"emptyString": 0\}, "constraints": \{"minimum": 0\}, "visible": true\},
									\{"name": "country", "label": "Country", "path": "country", "dataType":"sap.ui.model.type.String", "visible": true\}]'
					filtersChanged=".onFiltersChanged">
					<mdc:filterItems>
						<!-- Title - String -->
						<mdc:FilterField
							id="mountainsFilterbar--filter--name"
							propertyKey="name"
							valueHelp="VH1"
							operators="EQ"
							delegate='\{"name": "sap/ui/mdc/field/FieldBaseDelegate", "payload": \{\}\}'>
						</mdc:FilterField>

						<!-- Height - Integer -->
						<mdc:FilterField
							id="mountainsFilterbar--filter--height"
							propertyKey="height"
							delegate='\{"name": "sap/ui/mdc/field/FieldBaseDelegate", "payload": \{\}\}' >
						</mdc:FilterField>

						<!-- Prominence - Float -->
						<mdc:FilterField
							id="mountainsFilterbar--filter--prominence"
							propertyKey="prominence"
							delegate='\{"name": "sap/ui/mdc/field/FieldBaseDelegate", "payload": \{\}\}'>
						</mdc:FilterField>

						<!-- Parent Mountain - Boolean -->
						<mdc:FilterField
							id="mountainsFilterbar--filter--parent_mountain"
							propertyKey="parent_mountain"
							operators="EQ"
							delegate='\{"name": "sap/ui/mdc/field/FieldBaseDelegate", "payload": \{\}\}'>
						</mdc:FilterField>

						<!-- First Ascent - Date -->
						<mdc:FilterField
							id="mountainsFilterbar--filter--first_ascent"
							propertyKey="first_ascent"
							operators="EQ,BT,TODAY,YESTERDAY,TOMORROW,TODAYFROMTO,LASTDAYS,NEXTDAYS"
							delegate='\{"name": "delegates/odata/v4/FieldBaseDelegate", "payload": \{\}\}' >
						</mdc:FilterField>

						<!-- Rank (formatOptions and constraints) -->
						<mdc:FilterField
							id="mountainsFilterbar--filter--rank"
							propertyKey="rank"
							delegate='\{"name": "sap/ui/mdc/field/FieldBaseDelegate", "payload": \{\}\}'
							operators="EQ">
						</mdc:FilterField>

						<!-- Country - String -->
						<mdc:FilterField
							id="mountainsFilterbar--filter--country"
							propertyKey="country"
							delegate='\{"name": "sap/ui/mdc/field/FieldBaseDelegate", "payload": \{\}\}'>
						</mdc:FilterField>

					</mdc:filterItems>
					<mdc:dependents>
						<mdc:ValueHelp id="VH1" delegate='\{"name": "mdc/sample/delegate/JSONValueHelpDelegate", "payload": \{"searchKeys": ["name"]\}\}'>
							<mdc:typeahead>
								<mdcvh:Popover id="VH1-pop" title="Select Mountain">
									<mdcvc:MTable id="VH1-pop-mTable" keyPath="name" descriptionPath="name">
										<Table  id="VH1-pop-mTable-table" items='{path : "mountains>/mountains"}' width="30rem">
											<columns>
												<Column id="VH1-pop-mTable-table-column-rank" visible="false">
													<header>
														<Text id="VH1-pop-mTable-table-column-rank-label" text="Rank" />
													</header>
												</Column>
												<Column id="VH1-pop-mTable-table-column-name">
													<header>
														<Text id="VH1-pop-mTable-table-column-name-label" text="Name" />
													</header>
												</Column>
												<Column id="VH1-pop-mTable-table-column-height">
													<header>
														<Text id="VH1-pop-mTable-table-column-height-label" text="Height" />
													</header>
												</Column>
											</columns>
											<items>
												<ColumnListItem id="VH1-pop-mTable-table-item" type="Active">
													<cells>
														<Text id="VH1-pop-mTable-table-item--rank" text="{mountains>rank}"/>
														<Text id="VH1-pop-mTable-table-item--name" text="{mountains>name}"/>
														<Text id="VH1-pop-mTable-table-item--height" text="{mountains>height}"/>
													</cells>
												</ColumnListItem>
											</items>
										</Table>
									</mdcvc:MTable>
								</mdcvh:Popover>
							</mdc:typeahead>
						</mdc:ValueHelp>
					</mdc:dependents>
				</mdc:FilterBar>
			</f:DynamicPageHeader>
		</f:header>
		<f:content>
			<VBox id="contentLayout">
				<Title id="contentTitle" text="Conditions"/>
				<Text id="contentDescription" text="The following JSON is the output of the getConditions() function from the Filterbar." class="sapUiSmallMarginBottom" />
				<Label id="inputTextLabel" text="Editor height (px)" labelFor="inputText" />
				<Slider
					id="inputText"
					value="{/editorHeight}"
					min="100"
					enableTickmarks="true"
					max="800"
					step="50"
					class="sapUiMediumMarginBottom"/>
				<ce:CodeEditor
					id="conditionsEditor"
					type="json"
					value="{/conditionsText}"
					editable="false"
					height="{
						path: '/editorHeight',
						formatter: '.formatter.formatHeight'
					}" />
			</VBox>
		</f:content>
	</f:DynamicPage>
</mvc:View>