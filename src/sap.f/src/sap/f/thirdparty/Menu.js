sap.ui.define(["sap/f/thirdparty/webcomponents","sap/f/thirdparty/event-strict","sap/f/thirdparty/Theme","sap/f/thirdparty/parameters-bundle.css","sap/f/thirdparty/MenuItem2","sap/f/thirdparty/parameters-bundle.css2","sap/f/thirdparty/ResponsivePopover","sap/f/thirdparty/List","sap/f/thirdparty/BusyIndicator","sap/f/thirdparty/Button2","sap/f/thirdparty/i18n-defaults2","sap/f/thirdparty/Icons","sap/f/thirdparty/information","sap/f/thirdparty/FocusableElements","sap/f/thirdparty/ListItemBase","sap/f/thirdparty/ListItemAdditionalText.css","sap/f/thirdparty/Icon","sap/f/thirdparty/ValueState","sap/f/thirdparty/AccessibilityTextsHelper","sap/f/thirdparty/Label","sap/f/thirdparty/Title","sap/f/thirdparty/toLowercaseEnumValue","sap/f/thirdparty/ListItemGroup","sap/f/thirdparty/WrappingType","sap/f/thirdparty/willShowContent"],function(e,t,i,o,s,n,r,a,l,p,u,c,h,d,f,m,_,v,g,y,b,I,x,O,M){"use strict";function w(){return n.jsxs(r.ResponsivePopover,{id:`${this._id}-menu-rp`,class:"ui5-menu-rp",placement:this.placement,verticalAlign:"Bottom",horizontalAlign:this.horizontalAlign,opener:this.opener,open:this.open,preventInitialFocus:true,hideArrow:true,allowTargetOverlap:true,accessibleName:this.accessibleNameText,onBeforeOpen:this._beforePopoverOpen,onOpen:this._afterPopoverOpen,onBeforeClose:this._beforePopoverClose,onClose:this._afterPopoverClose,children:[this.isPhone&&n.jsx("div",{slot:"header",class:"ui5-menu-dialog-header",children:n.jsx("div",{class:"ui5-menu-dialog-title",children:n.jsx("h1",{children:this.headerText})})}),n.jsx("div",{id:`${this._id}-menu-main`,class:this.loading?"ui5-menu-busy-indicator-main":"",children:this.items.length?n.jsx(a.List,{id:`${this._id}- menu-list`,selectionMode:"None",loading:this.loading,loadingDelay:this.loadingDelay,separators:"None",accessibleRole:"Menu",onItemClick:this._itemClick,onMouseOver:this._itemMouseOver,onKeyDown:this._itemKeyDown,"onui5-close-menu":this._close,"onui5-exit-end-content":this._navigateOutOfEndContent,children:n.jsx("slot",{})}):this.loading&&n.jsx(l.BusyIndicator,{id:`${this._id}-menu-busy-indicator`,delay:this.loadingDelay,class:"ui5-menu-busy-indicator",active:true})}),this.isPhone&&n.jsx("div",{slot:"footer",class:"ui5-menu-dialog-footer",children:n.jsx(p.Button,{design:"Transparent",onClick:this._close,children:this.labelCancel})})]})}i.f("@"+"ui5"+"/"+"webcomponents-theming","sap_horizon",async()=>n.defaultThemeBase);i.f("@"+"u"+"i"+"5"+"/"+"w"+"e"+"b"+"c"+"o"+"m"+"p"+"o"+"n"+"e"+"n"+"t"+"s","sap_horizon",async()=>o.defaultTheme,"host");var T=`:host{line-height:initial}::slotted([ui5-menu-item]){line-height:inherit}.ui5-menu-rp[ui5-responsive-popover]::part(header),.ui5-menu-rp[ui5-responsive-popover]::part(content),.ui5-menu-rp[ui5-responsive-popover]::part(footer){padding:0}.ui5-menu-rp[ui5-responsive-popover]{box-shadow:var(--sapContent_Shadow1);border-radius:var(--_ui5_menu_popover_border_radius)}.ui5-menu-busy-indicator{width:100%;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.ui5-menu-busy-indicator-main{min-height:var(--_ui5_list_item_base_height)}.ui5-menu-dialog-header{display:flex;height:var(--_ui5-responsive_popover_header_height);align-items:center;justify-content:space-between;padding:0px 1rem;width:100%;overflow:hidden}.ui5-menu-dialog-title{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;width:calc(100% - 6.5rem);padding-right:1rem;font-family:var(--sapFontHeaderFamily)}.ui5-menu-dialog-title>h1{display:inline-block;max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:var(--sapFontHeader5Size)}.ui5-menu-back-button{margin-right:1rem}.ui5-menu-dialog-footer{display:flex;align-items:center;justify-content:flex-end;padding:0 1rem;width:100%;border-top:.0625rem solid var(--sapPageFooter_BorderColor)}\n`;var C=this&&this.__decorate||function(e,t,i,o){var s=arguments.length,n=s<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,i):o,r;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)if(r=e[a])n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n;return s>3&&n&&Object.defineProperty(t,i,n),n};var D;const E=300;let P=D=class t extends e.S{constructor(){super(...arguments);this.open=false;this.placement="Bottom";this.horizontalAlign="Start";this.loading=false;this.loadingDelay=1e3}get isRtl(){return this.effectiveDir==="rtl"}get labelCancel(){return D.i18nBundle.getText(u.MENU_CANCEL_BUTTON_TEXT)}get isPhone(){return i.d()}get _popover(){return this.shadowRoot.querySelector("[ui5-responsive-popover]")}get _list(){return this.shadowRoot.querySelector("[ui5-list]")}get _menuItemGroups(){return this.items.filter(s.isInstanceOfMenuItemGroup)}get _menuItems(){return this.items.filter(s.isInstanceOfMenuItem)}get _allMenuItems(){const e=[];const t=this.getSlottedNodes("items");t.forEach(t=>{if(s.isInstanceOfMenuItemGroup(t)){e.push(...t._menuItems)}else if(!s.isInstanceOfMenuSeparator(t)){e.push(t)}});return e}get _navigatableMenuItems(){const e=[];const t=this.getSlottedNodes("items");t.forEach(t=>{if(s.isInstanceOfMenuItemGroup(t)){const i=t.getSlottedNodes("items");e.push(...i)}else if(!s.isInstanceOfMenuSeparator(t)){e.push(t)}});return e}get accessibleNameText(){return D.i18nBundle.getText(u.MENU_POPOVER_ACCESSIBLE_NAME)}onBeforeRendering(){const e=this._allMenuItems.some(e=>!!e.icon);this._setupItemNavigation();this._allMenuItems.forEach(t=>{t._siblingsWithIcon=e})}getFocusDomRef(){return this._list?.getFocusDomRef()}_setupItemNavigation(){if(this._list){this._list._itemNavigation._getItems=()=>this._navigatableMenuItems}}_close(){this.open=false}_openItemSubMenu(e){clearTimeout(this._timeout);if(!e._popover||e._popover.open){return}this.fireDecoratorEvent("before-open",{item:e});e._popover.opener=e;e._popover.open=true;e.selected=true}_itemMouseOver(e){if(!i.f$1()){return}const t=e.target;if(!s.isInstanceOfMenuItem(t)){return}t.focus();this._startOpenTimeout(t)}async focus(e){await i.f$2();const t=this._allMenuItems[0];if(t){return t.focus(e)}return super.focus(e)}_closeOtherSubMenus(e){const t=this._allMenuItems;if(!t.includes(e)){return}t.forEach(t=>{if(t!==e){t._close()}})}_startOpenTimeout(e){clearTimeout(this._timeout);this._timeout=setTimeout(()=>{this._closeOtherSubMenus(e);this._openItemSubMenu(e)},E)}_itemClick(e){const t=e.detail.item;if(!t._popover){const e=!this.fireDecoratorEvent("item-click",{item:t,text:t.text||""});if(!e){t._updateCheckedState();this._popover&&!t._shiftPressed&&t.fireDecoratorEvent("close-menu")}}else{this._openItemSubMenu(t)}}_itemKeyDown(t){const i=e.x(t)||e.V(t);const o=t.target;if(!s.isInstanceOfMenuItem(o)){return}const n=e.R(t)||e.D(t);const r=this.isRtl?e.D(t):e.R(t);if(e.b(t)||i){t.preventDefault()}if(n){o._navigateToEndContent(e.D(t))}if(r){this._openItemSubMenu(o)}else if(i){this._close()}}_navigateOutOfEndContent(e){const t=e.target;const i=e.detail.shouldNavigateToNextItem;const o=this._allMenuItems;const s=o.indexOf(t);if(s>-1){const t=i?o[s+1]:o[s-1];const n=t||o[s];n?.focus();e.stopPropagation()}}_beforePopoverOpen(e){const t=!this.fireDecoratorEvent("before-open",{});if(t){this.open=false;e.preventDefault()}}_afterPopoverOpen(){this._allMenuItems[0]?.focus();this.fireDecoratorEvent("open")}_beforePopoverClose(e){const t=!this.fireDecoratorEvent("before-close",{escPressed:e.detail.escPressed});if(t){this.open=true;e.preventDefault()}}_afterPopoverClose(){this.open=false;this.fireDecoratorEvent("close")}};C([e.s()],P.prototype,"headerText",void 0);C([e.s({type:Boolean})],P.prototype,"open",void 0);C([e.s()],P.prototype,"placement",void 0);C([e.s()],P.prototype,"horizontalAlign",void 0);C([e.s({type:Boolean})],P.prototype,"loading",void 0);C([e.s({type:Number})],P.prototype,"loadingDelay",void 0);C([e.s({converter:r.e})],P.prototype,"opener",void 0);C([e.d({default:true,type:HTMLElement,invalidateOnChildChange:true})],P.prototype,"items",void 0);C([o.i("@ui5/webcomponents")],P,"i18nBundle",void 0);P=D=C([e.m({tag:"ui5-menu",renderer:n.y,styles:T,template:w}),t.l("item-click",{cancelable:true}),t.l("before-open",{bubbles:true,cancelable:true}),t.l("open",{bubbles:true}),t.l("close-menu",{bubbles:true}),t.l("before-close",{bubbles:true,cancelable:true}),t.l("close")],P);P.define();var S=P;return S});
//# sourceMappingURL=Menu.js.map